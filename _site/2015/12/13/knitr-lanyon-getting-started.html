<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Getting Started with Knitr-Lanyon &middot; eCOTS 2016 Regional Conference, Georgetown KY
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/ecots16ky/public/css/poole.css">
  <link rel="stylesheet" href="/ecots16ky/public/css/syntax.css">
  <link rel="stylesheet" href="/ecots16ky/public/css/lanyon.css">
  <link rel="stylesheet" href="/ecots16ky/public/css/custom.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/ecots16ky/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/ecots16ky/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
  
  <!-- Mathjax -->
  <script type="text/javascript"
            src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
    
  
</head>


  <body>

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p>Face-to-face enhancement of eCOTS 2016</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="/ecots16ky">Home</a>

    

      
      
        
          
        
      
        
      
        
          
            <a class="sidebar-nav-item" href="/ecots16ky/about.html">About</a>
          
        
      
        
          
            <a class="sidebar-nav-item" href="/ecots16ky/archive.html">Archives</a>
          
        
      
        
      
        
          
            <a class="sidebar-nav-item" href="/ecots16ky/categories.html">Categories</a>
          
        
      
        
          
        
      

      <a class="sidebar-nav-item" href="https://github.com/homerhanumat/ecots16ky">GitHub project</a>
  </nav>

</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">eCOTS 2016 Regional Conference, Georgetown KY</a>
            <small></small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="post">
  <h1 class="post-title">Getting Started with Knitr-Lanyon</h1>
  <span class="post-date">13 Dec 2015</span>
  <h2 id="introduction">Introduction</h2>

<p>The aim of this project is to help students and colleagues who for some reason want to blog on R-related topics.  If you have a particular Git Hub project that deals with R and you want to blog about your work as it develops, or if you simply want to blog about R in general, then you can use the material from my <a href="https://github.com/homerhanumat/knitr-lanyon"><code>knitr-lanyon</code></a> repository to set up, with minimal fuss, a Jekyll-powered site with good styling borrowed from Mark Otto’s <a href="https://github.com/poole/lanyon">Lanyon project</a>.  With help from Yihui Xie’s <a href="https://github.com/yihui/servr"><code>servr</code></a> package and <a href="https://github.com/yihui/knitr-jekyll">knitr-jekyll</a> code you ‘ll be able to write your posts in R Markdown, build and preview the site locally, and push to your Git Hub Pages site when you are ready.</p>

<p>I have tried to minimize what you need to know about Jekyll (and web development generally) in order to get going.  You can learn more about Jekyll when it suits you and eventually make thorough-going alterations to my blog-template, but for now I want you to be able to concentrate on getting your content out there to a waiting public.</p>

<h2 id="preliminaries">Preliminaries</h2>

<h3 id="platform">Platform</h3>

<p>Jekyll is not officially supported on Windows, so you had best try this with Mac OSX, or with a Linux distribution.  (Either way works well, in my experience.)  But if you are determined to give it a try on Windows, consult the documentation <a href="http://jekyllrb.com/docs/windows/">here</a>.</p>

<h3 id="get-my-files">Get My Files</h3>

<p>Consult the <a href="https://pages.github.com/">Github Pages guide</a>.  Decide whether you want a general user site or a site associated with a partcular project repository.</p>

<h4 id="getting-files-for-a-project-site">Getting Files for a Project Site</h4>

<p>If you don’t already have an existing project but want a project-associated site, then fork my <a href="https://github.com/homerhanumat/knitr-lanyon">knitr-lanyon</a> repository from Git Hub, rename it as you wish and then clone it on your own machine.</p>

<p>If you are using R Studio, then you could accomplish this by creating a new project under version control.  The final step of this process clones from your remote site on Github, and you find yourself in the new project on the master branch.  Click on the Git tab and then the More menu, and open a shell.  You will be in the root directory of your project.  Run these commands:</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">git fetch
git checkout gh<span class="o">-</span>pages</code></pre></div>

<p>and then exit the shell.  You will now be in the local <code>gh-pages</code> branch of your project.  All of your blogging work will be done in this branch.  When you want to do actual project work, switch to the master branch.</p>

<p>If you already have a project repository on Git Hub and want a site associated with it, then simply create a <code>gh-pages</code> branch, delete all of the files, download a <a href="https://github.com/homerhanumat/knitr-lanyon/archive/gh-pages.zip">zip file</a> of my <code>gh-pages</code> branch and extract it into your repo while you have your <code>gh-pages</code> branch checked out.</p>

<h4 id="getting-files-for-a-user-site">Getting Files for a User Site</h4>

<p>Having created your user respository (<code>yourgithubusername.github.io</code> as per the GitHub Pages guide), clone your user repo onto your own machine.  Stay on your <code>master</code> branch:  you don’t create a <code>gh-pages</code> branch for a user site.  Download a <a href="https://github.com/homerhanumat/knitr-lanyon/archive/gh-pages.zip">zip file</a> of my <code>gh-pages</code> branch and extract it into your repo.</p>

<h2 id="configuring-my-files-for-your-use">Configuring My Files for Your Use</h2>

<p>In the root directory, locate the <code>_config.yml</code> file.  Make some choices:</p>

<ul>
  <li>Change the <code>title</code> and <code>description</code>.</li>
  <li>Change the value of <code>baseurl</code> as per the commented directions.  For a site associated with a repository named <code>myProject</code>, the base url will be set to “/myProject”.  For a user site, it’s just “”, an empty string.</li>
  <li>Change the value of <code>baseurlknitr</code>.  It should always be the same as <code>baseurl</code>, with the addition of ‘/’ at the end.  So for a project site it’s “/myProject/” and for a user site it’s just “/”.</li>
  <li>Change <code>url</code>.  Since you are pushing to Git Hub, it can be <code>https://yourgithubusername.github.io</code>.</li>
  <li>Decide if you would like people to be able to comment on your posts.  If you want this, leave <code>disqus</code> at <code>true</code> and register at the <a href="https://disqus.com/">Disqus.com</a>.  You will have the opportunity to add Disqus to your site.  Do this.  As part of this process you will be asked to create a <em>shortname</em> for your site.  Set <code>shortname</code> accordingly.  If you don’t want commenting, simply set <code>disqus</code> to <code>false</code>.</li>
  <li>Change <code>twitter</code> and <code>facebook</code> to <code>false</code> if you don’t want the Tweet and Facebook buttons for your posts.</li>
</ul>

<h3 id="get-the-packages">Get the Packages</h3>

<h3 id="ruby-and-gems">Ruby and Gems</h3>

<p>You will need to install <a href="https://www.ruby-lang.org/en/downloads/">Ruby</a>, and then install the <a href="http://jekyllrb.com/">Jekyll</a> gem.  It’s best if you install the same version of Jekyll that Git Hub will use to build your page.  You can find the current version <a href="https://pages.github.com/versions/">here</a>.  At the time of writing this is version 2.4.0, so once you have installed Ruby, open a terminal and run the command:</p>

<p><code>
sudo gem install jekyll -v 2.4.0
</code></p>

<p>You’ll also want a gem that keeps all dependencies of Jekyll at the same version level as used by Git Hub:</p>

<p><code>
sudo gem install gh-pages
</code></p>

<p>In order to stay current with Git Hub, update this gem frequently:</p>

<p><code>
sudo gem update gh-pages
</code></p>

<h3 id="the-servr-package">The servr Package</h3>

<p>You’ll need Yihui Xie’s <code>servr</code> package.  In R, run:</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">install.packages<span class="p">(</span><span class="s">&quot;servr&quot;</span><span class="p">)</span></code></pre></div>

<h2 id="authoring">Authoring</h2>

<p>From the <code>_source</code> folder, find an R Markdown document and open it.  You’ll see YAML front-matter at the beginning, like this:</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">layout<span class="o">:</span>  post
title<span class="o">:</span> <span class="s">&quot;Sample Post&quot;</span>
comments<span class="o">:</span>  true
published<span class="o">:</span>  true
author<span class="o">:</span> <span class="s">&quot;Homer White&quot;</span>
<span class="kp">date</span><span class="o">:</span> <span class="m">2015-12-12</span> <span class="m">20</span><span class="o">:</span><span class="m">00</span><span class="o">:</span><span class="m">00</span>
categories<span class="o">:</span> <span class="p">[</span>R<span class="p">]</span>
output<span class="o">:</span>
  html_document<span class="o">:</span>
    mathjax<span class="o">:</span>  default
    fig_caption<span class="o">:</span>  true</code></pre></div>

<p>Set the title, author and date as you wish.  If your post has categories, list them, for example:</p>

<p><code>
categories:  [R, 'Marsupial Studies']
</code></p>

<p>Note that mutli-word category-names are quoted.</p>

<p>Save the post using the date-and-title format:</p>

<blockquote>
  <p><code>year-mm-dd-your-brief-post-title.Rmd</code></p>
</blockquote>

<p>Write your post.  As you go, you can run the R command:</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">servr<span class="o">::</span>jekyll<span class="p">()</span></code></pre></div>

<p>If you are using R Studio then the site will show up in the Viewer.  Every time you save a change to your draft post, the site will re-build, so you can preview your change in real time.  That’s the genius of Yihui Xie.</p>

<p>The post will be rendered using version 1.9 of the Ruby gem <code>kramdown</code>.  Look in my <code>sample-post</code> for examples of inline and displayed mathematics.  Otherwise you can write pretty much as you normally do in R Markdown.</p>

<p>When you are happy with your post, commit your changes and push your <code>gh-pages</code> branch to Git Hub.  You can view your site online at:</p>

<blockquote>
  <p>https://yourgithubusername.github.io/yourProjectName</p>
</blockquote>

<p><strong>Note on Compatibility</strong>:  If for one reason or another you had already installed Jekyll prior to working with this post, then it’s probably a version different from the one currently used by GitHub.  If yo uwant to keep that other version around then you will need to tell <code>servr::jekyll()</code> to build your site with the Github-compatible version.  Suppose, for example that the correct version is Jekyll-2.4.0.  Then to preview you would run:</p>

<div class="highlight"><pre><code class="language-r" data-lang="r">server<span class="o">::</span>jekyll<span class="p">(</span>command <span class="o">=</span> <span class="s">&#39;jekyll _2.4.0_ build&#39;</span><span class="p">)</span></code></pre></div>

<h2 id="further-customization">Further Customization</h2>

<p>Make the site entirely your own by erasing my posts.  Delete the unwanted R Markdown sources, and delete their processed Markdown derivatives from the <code>_posts</code> folder.</p>

<p>Styling is provided from Mark Otto’s excellent Hyde project.  Hyde comes with eight themes, and you can put the sidebar on the right if you like.  Consult the <a href="https://github.com/poole/lanyon">Lanyon project</a> README to learn how to make these changes.</p>

<p>If you know a bit of CSS then you might want to play around with the  <code>public/css/custom.css</code> file.</p>

<p>Eventually you should learn more about Jekyll and the <a href="http://liquidmarkup.org/">Liquid</a> templating system that Jekyll supports.  Then you can customize the site even further:</p>

<ul>
  <li>adding or taking away sidebar widgets</li>
  <li>displaying author names</li>
  <li>using draft posts</li>
</ul>

<p>and more.  Happy blogging!</p>

</div>

<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="/2015/12/12/sample-post.html">
            Sample Post
            <small>12 Dec 2015</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>


<a href="https://twitter.com/share" class="twitter-share-button"{count}>Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-share-button" data-href="https://homerhanumat.github.io/ecots16ky" data-layout="button_count"></div>




      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

  </body>
</html>
